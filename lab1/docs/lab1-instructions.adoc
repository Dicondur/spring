:noaudio:
:scrollbar:
:data-uri:
:toc2:

= Lab 1: Getting Started with Spring and Spring Boot

In this lab, you will learn the basics of Spring development and how to get started with a Spring Boot project. 

== Background

In the past Spring has gotten a lot of criticism for beeing hard to get started with. This has however been addressed by the Spring community with the Spring Boot project and the Spring Initalizer service hosted at http://start.spring.io. However booth Spring Boot and Spring Initalizer takes an opinonated approach to which frameworks and 3rd party library to use. In a similar manner Red Hat provides a service at launch.opeenshift.io that will take an opinionated approach at which frameworks and target platfrom (OpenShift) you are developing for. 

Since this lab aims to teach you have to work with existing Spring application and run it on RHOAR we are going to use the Spring Initalizer. Alternatively we could have used launch.openshift.io or JBoss Forge to initiate the project, however that would have shortcutted some of the steps that are important for your understanding of how to run Spring on RHOAR.

= Steps

:numbered:

== Initiate the project using Spring Initalizer

1. Open a browser to http://start.spring.io and enter the following information

+
Generate a **Maven project** with **Java** and Spring Boot **1.5.4**
+
[options="header,footer,autowidth"]
|=======
|Attribute|Value
|Group |com.redhat.coolstore
|Artifact |product-catalog
|Dependencies | _Leave Blank_
|=======
+
image::images/spring-initilizer.png[Spring initilizer]

1. Click Generate project
1. Open a terminal and unzip the downloaded project
+
[source,bash]
----
mkdir -p ~/rhoar-training/spring
cd ~/rhoar-training/spring
unzip ~/Downloads/product-catalog.zip 
----

1. Test to build the project  
+
[source,bash]
----
cd product-catalog
mvn clean package
----

== Create your first Component

1. Create a Java class named `ProductCatalogService` in package `com.redhat.coolstore.productcatalog`

1. Annotate the class with `@Component` from `import org.springframework.stereotype.Component`

1. Add a **public** method called `sayHello` returning a `String` like this
+
[source,java]
---- 
    public String sayHello() {
        return "Hello World!";
    }
----

1. Inject the component into the `ProductCatalogApplicationTests`
+
[source,java]
---- 
    @Autowired
    ProductCatalogService service
----
+
Note: Autowire annotation requires that you add `import org.springframework.beans.factory.annotation.Autowired;`

1. Add a test method called `testDefaultProudctList`
+
[source,java]
---- 
	@Test
    public void testDefaultProductList() {
        String message = service.sayHello();
        assertTrue(message!=null);
        assertEquals(message,"Hello World!");
    }
----
+
Note: test methods requires that you add the following import statements `import static org.junit.Assert.assertEquals;` and `import static org.junit.Assert.assertTrue;`

1. Run the tests either in your IDE or from commandline like this
+
[source,bash]
----
mvn verify
----

You can now inject a component with @Autowired annotation, similary to how CDI works in Java EE. If you are a Java EE developer you would probably prefer to use the JSR-330 standard annotation `@Inject` instead of `@Autowired` which is also supported by Spring. Let's change the test class to use @Inject instead.

1. Add the following dependency to the `pom.xml` in the `<dependencies>` section.
+
[source,xml]
----
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>
----

1. Change `ProductCatalogApplicationTest` and replace the `@Autowired` with `@Inject` and `import org.springframework.beans.factory.annotation.Autowired;` with `import javax.inject.Inject;`

1. Run the tests either in your IDE or from commandline again and verify that the `@Inject` works.
+
[source,bash]
----
mvn verify
----

== Use environment specific application properties

Components is a great way to implement business logic and sometimes we need to be able to change the behavious of our components using configuration. Spring provides a   

== Add REST capabilities using Apache CXF

TODO

= Summary





